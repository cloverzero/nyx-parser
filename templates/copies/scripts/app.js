/* Zepto v1.1.6 - zepto event ajax form ie - zeptojs.com/license */

/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */

//# sourceMappingURL=hammer.min.map;
//     Zepto.js
//     (c) 2010-2014 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

//     Zepto.js
//     (c) 2010-2014 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.
//
//     Some code (c) 2005, 2013 jQuery Foundation, Inc. and other contributors

var Zepto=function(){function M(e){return e==null?String(e):x[T.call(e)]||"object"}function _(e){return M(e)=="function"}function D(e){return e!=null&&e==e.window}function P(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function H(e){return M(e)=="object"}function B(e){return H(e)&&!D(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){return typeof e.length=="number"}function F(e){return o.call(e,function(e){return e!=null})}function I(e){return e.length>0?n.fn.concat.apply([],e):e}function q(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function R(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function U(e,t){return typeof t=="number"&&!l[q(e)]?t+"px":t}function z(e){var t,n;return a[e]||(t=u.createElement(e),u.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),a[e]=n),a[e]}function W(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function X(n,r,i){for(t in r)i&&(B(r[t])||O(r[t]))?(B(r[t])&&!B(n[t])&&(n[t]={}),O(r[t])&&!O(n[t])&&(n[t]=[]),X(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function V(e,t){return t==null?n(e):n(e).filter(t)}function $(e,t,n,r){return _(t)?t.call(e,n,r):t}function J(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function K(t,n){var r=t.className||"",i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Q(e){try{return e?e=="true"||(e=="false"?!1:e=="null"?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function G(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)G(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=/([A-Z])/g,m=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=u.createElement("table"),b=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:b,th:b,"*":u.createElement("div")},E=/complete|loaded|interactive/,S=/^[\w-]*$/,x={},T=x.toString,N={},C,k,L=u.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};return N.matches=function(e,t){if(!t||!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=L).appendChild(e),r=~N.qsa(i,t).indexOf(e),s&&L.removeChild(e),r},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})},N.fragment=function(t,r,i){var o,a,f;return h.test(t)&&(o=n(u.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(p,"<$1></$2>")),r===e&&(r=c.test(t)&&RegExp.$1),r in w||(r="*"),f=w[r],f.innerHTML=""+t,o=n.each(s.call(f.childNodes),function(){f.removeChild(this)})),B(i)&&(a=n(o),n.each(i,function(e,t){m.indexOf(e)>-1?a[e](t):a.attr(e,t)})),o},N.Z=function(e,t){return e=e||[],e.__proto__=n.fn,e.selector=t||"",e},N.isZ=function(e){return e instanceof N.Z},N.init=function(t,r){var i;if(!t)return N.Z();if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&c.test(t))i=N.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}else{if(_(t))return n(u).ready(t);if(N.isZ(t))return t;if(O(t))i=F(t);else if(H(t))i=[t],t=null;else if(c.test(t))i=N.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}return N.Z(i,t)},n=function(e,t){return N.init(e,t)},n.extend=function(e){var t,n=s.call(arguments,1);return typeof e=="boolean"&&(t=e,e=n.shift()),n.forEach(function(n){X(e,n,t)}),e},N.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",o=r||i?t.slice(1):t,u=S.test(o);return P(e)&&u&&r?(n=e.getElementById(o))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(u&&!r?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=u.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},n.type=M,n.isFunction=_,n.isWindow=D,n.isArray=O,n.isPlainObject=B,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.camelCase=C,n.trim=function(e){return e==null?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.map=function(e,t){var n,r=[],i,s;if(j(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return I(r)},n.each=function(e,t){var n,r;if(j(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.grep=function(e,t){return o.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){x["[object "+t+"]"]=t.toLowerCase()}),n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return E.test(u.readyState)&&u.body?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return i.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return _(e)?this.not(this.not(e)):n(o.call(this,function(t){return N.matches(t,e)}))},add:function(e,t){return n(k(this.concat(n(e,t))))},is:function(e){return this.length>0&&N.matches(this[0],e)},not:function(t){var r=[];if(_(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):j(t)&&_(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return H(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!H(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!H(e)?e:n(e)},find:function(e){var t,r=this;return e?typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(N.qsa(this[0],e)):t=this.map(function(){return N.qsa(this,e)}):t=n(),t},closest:function(e,t){var r=this[0],i=!1;typeof e=="object"&&(i=n(e));while(r&&!(i?i.indexOf(r)>=0:N.matches(r,e)))r=r!==t&&!P(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!P(e)&&t.indexOf(e)<0)return t.push(e),e});return V(t,e)},parent:function(e){return V(k(this.pluck("parentNode")),e)},children:function(e){return V(this.map(function(){return W(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return V(this.map(function(e,t){return o.call(W(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=_(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=_(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var r=this.innerHTML;n(this).empty().append($(this,e,t,r))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=$(this,e,t,this.textContent);this.textContent=n==null?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,r){var i;return typeof n!="string"||1 in arguments?this.each(function(e){if(this.nodeType!==1)return;if(H(n))for(t in n)J(this,t,n[t]);else J(this,n,$(this,r,e,this.getAttribute(n)))}):!this.length||this[0].nodeType!==1?e:!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i},removeAttr:function(e){return this.each(function(){this.nodeType===1&&e.split(" ").forEach(function(e){J(this,e)},this)})},prop:function(e,t){return e=A[e]||e,1 in arguments?this.each(function(n){this[e]=$(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(t,n){var r="data-"+t.replace(v,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return i!==null?Q(i):e},val:function(e){return 0 in arguments?this.each(function(t){this.value=$(this,e,t,this.value)}):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=$(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative"),r.css(o)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i,s=this[0];if(!s)return;i=getComputedStyle(s,"");if(typeof e=="string")return s.style[C(e)]||i.getPropertyValue(e);if(O(e)){var o={};return n.each(e,function(e,t){o[t]=s.style[C(t)]||i.getPropertyValue(t)}),o}}var u="";if(M(e)=="string")!r&&r!==0?this.each(function(){this.style.removeProperty(q(e))}):u=q(e)+":"+U(e,r);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(q(t))}):u+=q(t)+":"+U(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?i.some.call(this,function(e){return this.test(K(e))},R(e)):!1},addClass:function(e){return e?this.each(function(t){if(!("className"in this))return;r=[];var i=K(this),s=$(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&K(this,i+(i?" ":"")+r.join(" "))}):this},removeClass:function(t){return this.each(function(n){if(!("className"in this))return;if(t===e)return K(this,"");r=K(this),$(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(R(e)," ")}),K(this,r.trim())})},toggleClass:function(t,r){return t?this.each(function(i){var s=n(this),o=$(this,t,i,K(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var s,o=this[0];return i===e?D(o)?o["inner"+r]:P(o)?o.documentElement["scroll"+r]:(s=this.offset())&&s[t]:this.each(function(e){o=n(this),o.css(t,$(this,i,e,o[t]()))})}}),g.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){return e=M(t),e=="object"||e=="array"||t==null?t:N.fragment(t)}),s,o=this.length>1;return i.length<1?this:this.each(function(e,a){s=r?a:a.parentNode,a=t==0?a.nextSibling:t==1?a.firstChild:t==2?a:null;var f=n.contains(u.documentElement,s);i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!s)return n(e).remove();s.insertBefore(e,a),f&&G(e,function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})},n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),N.Z.prototype=n.fn,N.uniq=k,N.deserializeValue=Q,n.zepto=N,n}();window.Zepto=Zepto,window.$===undefined&&(window.$=Zepto),function(e){function c(e){return e._zid||(e._zid=t++)}function h(e,t,n,r){t=p(t);if(t.ns)var i=d(t.ns);return(o[c(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||c(e.fn)===c(n))&&(!r||e.sel==r)})}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!a&&e.e in f||!!t}function m(e){return l[e]||a&&f[e]||e}function g(t,r,i,s,u,a,f){var h=c(t),d=o[h]||(o[h]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var o=p(r);o.fn=i,o.sel=u,o.e in l&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var c=a||i;o.proxy=function(e){e=x(e);if(e.isImmediatePropagationStopped())return;e.data=s;var r=c.apply(t,e._args==n?[e]:[e].concat(e._args));return r===!1&&(e.preventDefault(),e.stopPropagation()),r},o.i=d.length,d.push(o),"addEventListener"in t&&t.addEventListener(m(o.e),o.proxy,v(o,f))})}function y(e,t,n,r,i){var s=c(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,r).forEach(function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,v(t,i))})})}function x(t,r){if(r||!t.isDefaultPrevented){r||(r=t),e.each(S,function(e,n){var i=r[e];t[e]=function(){return this[n]=b,i&&i.apply(r,arguments)},t[n]=w});if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=b}return t}function T(e){var t,r={originalEvent:e};for(t in e)!E.test(t)&&e[t]!==n&&(r[t]=e[t]);return x(r,e)}var t=1,n,r=Array.prototype.slice,i=e.isFunction,s=function(e){return typeof e=="string"},o={},u={},a="onfocusin"in window,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){var o=2 in arguments&&r.call(arguments,2);if(i(t)){var u=function(){return t.apply(n,o?o.concat(r.call(arguments)):arguments)};return u._zid=c(t),u}if(s(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},w=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,u,a,f){var l,c,h=this;if(t&&!s(t))return e.each(t,function(e,t){h.on(e,o,u,t,f)}),h;!s(o)&&!i(a)&&a!==!1&&(a=u,u=o,o=n);if(i(u)||u===!1)a=u,u=n;return a===!1&&(a=w),h.each(function(n,i){f&&(l=function(e){return y(i,e.type,a),a.apply(this,arguments)}),o&&(c=function(t){var n,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return n=e.extend(T(t),{currentTarget:s,liveFired:i}),(l||a).apply(s,[n].concat(r.call(arguments,1)))}),g(i,t,a,u,o,c||l)})},e.fn.off=function(t,r,o){var u=this;return t&&!s(t)?(e.each(t,function(e,t){u.off(e,r,t)}),u):(!s(r)&&!i(o)&&o!==!1&&(o=r,r=n),o===!1&&(o=w),u.each(function(){y(this,t,o,r)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each(function(){t.type in f&&typeof this[t.type]=="function"?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,u){r=T(s(t)?e.Event(t):t),r._args=n,r.target=u,e.each(h(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){s(e)||(t=e,e=t.type);var n=document.createEvent(u[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}}(Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.isDefaultPrevented()}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n,r){var i=n.context,s="success";n.success.call(i,e,s,t),r&&r.resolveWith(i,[e,s,t]),triggerGlobal(n,i,"ajaxSuccess",[t,n,e]),ajaxComplete(s,t,n)}function ajaxError(e,t,n,r,i){var s=r.context;r.error.call(s,n,t,e),i&&i.rejectWith(s,[n,t,e]),triggerGlobal(r,s,"ajaxError",[n,r,e||t]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return t==""?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data),e.data=undefined)}function parseArguments(e,t,n,r){return $.isFunction(t)&&(r=n,n=t,t=undefined),$.isFunction(n)||(r=n,n=undefined),{url:e,data:t,success:n,dataType:r}}function serialize(e,t,n,r){var i,s=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,u){i=$.type(u),r&&(t=n?r:r+"["+(o||i=="object"||i=="array"?t:"")+"]"),!r&&s?e.add(u.name,u.value):i=="array"||!n&&i=="object"?serialize(e,u,n,t):e.add(t,u)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,originAnchor=document.createElement("a");originAnchor.href=window.location.href,$.active=0,$.ajaxJSONP=function(e,t){if("type"in e){var n=e.jsonpCallback,r=($.isFunction(n)?n():n)||"jsonp"+ ++jsonpID,i=document.createElement("script"),s=window[r],o,u=function(e){$(i).triggerHandler("error",e||"abort")},a={abort:u},f;return t&&t.promise(a),$(i).on("load error",function(n,u){clearTimeout(f),$(i).off().remove(),n.type=="error"||!o?ajaxError(null,u||"error",a,e,t):ajaxSuccess(o[0],a,e,t),window[r]=s,o&&$.isFunction(s)&&s(o[0]),s=o=undefined}),ajaxBeforeSend(a,e)===!1?(u("abort"),a):(window[r]=function(){o=arguments},i.src=e.url.replace(/\?(.+)=\?/,"?$1="+r),document.head.appendChild(i),e.timeout>0&&(f=setTimeout(function(){u("timeout")},e.timeout)),a)}return $.ajax(e)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred(),urlAnchor;for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(urlAnchor=document.createElement("a"),urlAnchor.href=settings.url,urlAnchor.href=urlAnchor.href,settings.crossDomain=originAnchor.protocol+"//"+originAnchor.host!=urlAnchor.protocol+"//"+urlAnchor.host),settings.url||(settings.url=window.location.toString()),serializeData(settings);var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);hasPlaceholder&&(dataType="jsonp");if(settings.cache===!1||(!options||options.cache!==!0)&&("script"==dataType||"jsonp"==dataType))settings.url=appendQuery(settings.url,"_="+Date.now());if("jsonp"==dataType)return hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?")),$.ajaxJSONP(settings,deferred);var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;deferred&&deferred.promise(xhr),settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest"),setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime)mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime);(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded");if(settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings,deferred):ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}};if(ajaxBeforeSend(xhr,settings)===!1)return xhr.abort(),ajaxError(null,"abort",xhr,settings,deferred),xhr;if(settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers)nativeSetHeader.apply(xhr,headers[name]);return settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr},$.get=function(){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(){var e=parseArguments.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(){var e=parseArguments.apply(null,arguments);return e.dataType="json",$.ajax(e)},$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;return i.length>1&&(o.url=i[0],s=i[1]),o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e),u&&u.apply(r,arguments)},$.ajax(o),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){$.isFunction(t)&&(t=t()),t==null&&(t=""),this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n,r=[],i=function(e){if(e.forEach)return e.forEach(i);r.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(r,s){n=s.type,t=s.name,t&&s.nodeName.toLowerCase()!="fieldset"&&!s.disabled&&n!="submit"&&n!="reset"&&n!="button"&&n!="file"&&(n!="radio"&&n!="checkbox"||s.checked)&&i(e(s).val())}),r},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return e.type(t)==="array"&&"__Z"in t}});try{getComputedStyle(undefined)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(Zepto),define("zepto",function(e){return function(){var t,n;return t||e.$}}(this)),!function(e,t,n,r){"use strict";function i(e,t,n){return setTimeout(l(e,n),t)}function s(e,t,n){return Array.isArray(e)?(o(e,n[t],n),!0):!1}function o(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function u(e,t,n){for(var i=Object.keys(t),s=0;s<i.length;)(!n||n&&e[i[s]]===r)&&(e[i[s]]=t[i[s]]),s++;return e}function a(e,t){return u(e,t,!0)}function f(e,t,n){var r,i=t.prototype;r=e.prototype=Object.create(i),r.constructor=e,r._super=i,n&&u(r,n)}function l(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==lt?e.apply(t?t[0]||r:r,t):e}function h(e,t){return e===r?t:e}function p(e,t,n){o(g(t),function(t){e.addEventListener(t,n,!1)})}function d(e,t,n){o(g(t),function(t){e.removeEventListener(t,n,!1)})}function v(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return e.indexOf(t)>-1}function g(e){return e.trim().split(/\s+/g)}function y(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function b(e){return Array.prototype.slice.call(e,0)}function w(e,t,n){for(var r=[],i=[],s=0;s<e.length;){var o=t?e[s][t]:e[s];y(i,o)<0&&r.push(e[s]),i[s]=o,s++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function E(e,t){for(var n,i,s=t[0].toUpperCase()+t.slice(1),o=0;o<at.length;){if(n=at[o],i=n?n+s:t,i in e)return i;o++}return r}function S(){return dt++}function x(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function T(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&n.handler(t)},this.init()}function N(e){var t,n=e.options.inputClass;return new(t=n?n:gt?I:yt?U:mt?W:F)(e,C)}function C(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=t&Tt&&r-i===0,o=t&(Ct|kt)&&r-i===0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,k(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function k(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=O(t)),i>1&&!n.firstMultiple?n.firstMultiple=O(t):1===i&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,u=o?o.center:s.center,a=t.center=M(r);t.timeStamp=pt(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=H(u,a),t.distance=P(u,a),L(n,t),t.offsetDirection=D(t.deltaX,t.deltaY),t.scale=o?j(o.pointers,r):1,t.rotation=o?B(o.pointers,r):0,A(n,t);var f=e.element;v(t.srcEvent.target,f)&&(f=t.srcEvent.target),t.target=f}function L(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(t.eventType===Tt||s.eventType===Ct)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function A(e,t){var n,i,s,o,u=e.lastInterval||t,a=t.timeStamp-u.timeStamp;if(t.eventType!=kt&&(a>xt||u.velocity===r)){var f=u.deltaX-t.deltaX,l=u.deltaY-t.deltaY,c=_(a,f,l);i=c.x,s=c.y,n=ht(c.x)>ht(c.y)?c.x:c.y,o=D(f,l),e.lastInterval=t}else n=u.velocity,i=u.velocityX,s=u.velocityY,o=u.direction;t.velocity=n,t.velocityX=i,t.velocityY=s,t.direction=o}function O(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ct(e.pointers[n].clientX),clientY:ct(e.pointers[n].clientY)},n++;return{timeStamp:pt(),pointers:t,center:M(t),deltaX:e.deltaX,deltaY:e.deltaY}}function M(e){var t=e.length;if(1===t)return{x:ct(e[0].clientX),y:ct(e[0].clientY)};for(var n=0,r=0,i=0;t>i;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:ct(n/t),y:ct(r/t)}}function _(e,t,n){return{x:t/e||0,y:n/e||0}}function D(e,t){return e===t?Lt:ht(e)>=ht(t)?e>0?At:Ot:t>0?Mt:_t}function P(e,t,n){n||(n=Bt);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function H(e,t,n){n||(n=Bt);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function B(e,t){return H(t[1],t[0],jt)-H(e[1],e[0],jt)}function j(e,t){return P(t[0],t[1],jt)/P(e[0],e[1],jt)}function F(){this.evEl=It,this.evWin=qt,this.allow=!0,this.pressed=!1,T.apply(this,arguments)}function I(){this.evEl=zt,this.evWin=Wt,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=Vt,this.evWin=$t,this.started=!1,T.apply(this,arguments)}function R(e,t){var n=b(e.touches),r=b(e.changedTouches);return t&(Ct|kt)&&(n=w(n.concat(r),"identifier",!0)),[n,r]}function U(){this.evTarget=Kt,this.targetIds={},T.apply(this,arguments)}function z(e,t){var n=b(e.touches),r=this.targetIds;if(t&(Tt|Nt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,s,o=b(e.changedTouches),u=[],a=this.target;if(s=n.filter(function(e){return v(e.target,a)}),t===Tt)for(i=0;i<s.length;)r[s[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&u.push(o[i]),t&(Ct|kt)&&delete r[o[i].identifier],i++;return u.length?[w(s.concat(u),"identifier",!0),u]:void 0}function W(){T.apply(this,arguments);var e=l(this.handler,this);this.touch=new U(this.manager,e),this.mouse=new F(this.manager,e)}function X(e,t){this.manager=e,this.set(t)}function V(e){if(m(e,tn))return tn;var t=m(e,nn),n=m(e,rn);return t&&n?nn+" "+rn:t||n?t?nn:rn:m(e,en)?en:Zt}function $(e){this.id=S(),this.manager=null,this.options=a(e||{},this.defaults),this.options.enable=h(this.options.enable,!0),this.state=sn,this.simultaneous={},this.requireFail=[]}function J(e){return e&ln?"cancel":e&an?"end":e&un?"move":e&on?"start":""}function K(e){return e==_t?"down":e==Mt?"up":e==At?"left":e==Ot?"right":""}function Q(e,t){var n=t.manager;return n?n.get(e):e}function G(){$.apply(this,arguments)}function Y(){G.apply(this,arguments),this.pX=null,this.pY=null}function Z(){G.apply(this,arguments)}function et(){$.apply(this,arguments),this._timer=null,this._input=null}function tt(){G.apply(this,arguments)}function nt(){G.apply(this,arguments)}function rt(){$.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function it(e,t){return t=t||{},t.recognizers=h(t.recognizers,it.defaults.preset),new st(e,t)}function st(e,t){t=t||{},this.options=a(t,it.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=N(this),this.touchAction=new X(this,this.options.touchAction),ot(this,!0),o(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ot(e,t){var n=e.element;o(e.options.cssProps,function(e,r){n.style[E(n.style,r)]=t?e:""})}function ut(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var at=["","webkit","moz","MS","ms","o"],ft=t.createElement("div"),lt="function",ct=Math.round,ht=Math.abs,pt=Date.now,dt=1,vt=/mobile|tablet|ip(ad|hone|od)|android/i,mt="ontouchstart"in e,gt=E(e,"PointerEvent")!==r,yt=mt&&vt.test(navigator.userAgent),bt="touch",wt="pen",Et="mouse",St="kinect",xt=25,Tt=1,Nt=2,Ct=4,kt=8,Lt=1,At=2,Ot=4,Mt=8,_t=16,Dt=At|Ot,Pt=Mt|_t,Ht=Dt|Pt,Bt=["x","y"],jt=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(x(this.element),this.evWin,this.domHandler)}};var Ft={mousedown:Tt,mousemove:Nt,mouseup:Ct},It="mousedown",qt="mousemove mouseup";f(F,T,{handler:function(e){var t=Ft[e.type];t&Tt&&0===e.button&&(this.pressed=!0),t&Nt&&1!==e.which&&(t=Ct),this.pressed&&this.allow&&(t&Ct&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Et,srcEvent:e}))}});var Rt={pointerdown:Tt,pointermove:Nt,pointerup:Ct,pointercancel:kt,pointerout:kt},Ut={2:bt,3:wt,4:Et,5:St},zt="pointerdown",Wt="pointermove pointerup pointercancel";e.MSPointerEvent&&(zt="MSPointerDown",Wt="MSPointerMove MSPointerUp MSPointerCancel"),f(I,T,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=Rt[r],s=Ut[e.pointerType]||e.pointerType,o=s==bt,u=y(t,e.pointerId,"pointerId");i&Tt&&(0===e.button||o)?0>u&&(t.push(e),u=t.length-1):i&(Ct|kt)&&(n=!0),0>u||(t[u]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:s,srcEvent:e}),n&&t.splice(u,1))}});var Xt={touchstart:Tt,touchmove:Nt,touchend:Ct,touchcancel:kt},Vt="touchstart",$t="touchstart touchmove touchend touchcancel";f(q,T,{handler:function(e){var t=Xt[e.type];if(t===Tt&&(this.started=!0),this.started){var n=R.call(this,e,t);t&(Ct|kt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:bt,srcEvent:e})}}});var Jt={touchstart:Tt,touchmove:Nt,touchend:Ct,touchcancel:kt},Kt="touchstart touchmove touchend touchcancel";f(U,T,{handler:function(e){var t=Jt[e.type],n=z.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:bt,srcEvent:e})}}),f(W,T,{handler:function(e,t,n){var r=n.pointerType==bt,i=n.pointerType==Et;if(r)this.mouse.allow=!1;else if(i&&!this.mouse.allow)return;t&(Ct|kt)&&(this.mouse.allow=!0),this.callback(e,t,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Qt=E(ft.style,"touchAction"),Gt=Qt!==r,Yt="compute",Zt="auto",en="manipulation",tn="none",nn="pan-x",rn="pan-y";X.prototype={set:function(e){e==Yt&&(e=this.compute()),Gt&&(this.manager.element.style[Qt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return o(this.manager.recognizers,function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),V(e.join(" "))},preventDefaults:function(e){if(!Gt){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,i=m(r,tn),s=m(r,rn),o=m(r,nn);return i||s&&n&Dt||o&&n&Pt?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var sn=1,on=2,un=4,an=8,fn=an,ln=16,cn=32;$.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(s(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Q(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return s(e,"dropRecognizeWith",this)?this:(e=Q(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(s(e,"requireFailure",this))return this;var t=this.requireFail;return e=Q(e,this),-1===y(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(s(e,"dropRequireFailure",this))return this;e=Q(e,this);var t=y(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(n.options.event+(t?J(r):""),e)}var n=this,r=this.state;an>r&&t(!0),t(),r>=an&&t(!0)},tryEmit:function(e){return this.canEmit()?this.emit(e):void (this.state=cn)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(cn|sn)))return!1;e++}return!0},recognize:function(e){var t=u({},e);return c(this.options.enable,[this,t])?(this.state&(fn|ln|cn)&&(this.state=sn),this.state=this.process(t),void (this.state&(on|un|an|ln)&&this.tryEmit(t))):(this.reset(),void (this.state=cn))},process:function(){},getTouchAction:function(){},reset:function(){}},f(G,$,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(on|un),i=this.attrTest(e);return r&&(n&kt||!i)?t|ln:r||i?n&Ct?t|an:t&on?t|un:on:cn}}),f(Y,G,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ht},getTouchAction:function(){var e=this.options.direction,t=[];return e&Dt&&t.push(rn),e&Pt&&t.push(nn),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&Dt?(i=0===s?Lt:0>s?At:Ot,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=0===o?Lt:0>o?Mt:_t,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return G.prototype.attrTest.call(this,e)&&(this.state&on||!(this.state&on)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=K(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),f(Z,G,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&on)},emit:function(e){if(this._super.emit.call(this,e),1!==e.scale){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),f(et,$,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Zt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,s=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(Ct|kt)&&!s)this.reset();else if(e.eventType&Tt)this.reset(),this._timer=i(function(){this.state=fn,this.tryEmit()},t.time,this);else if(e.eventType&Ct)return fn;return cn},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===fn&&(e&&e.eventType&Ct?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=pt(),this.manager.emit(this.options.event,this._input)))}}),f(tt,G,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&on)}}),f(nt,G,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Dt|Pt,pointers:1},getTouchAction:function(){return Y.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Dt|Pt)?t=e.velocity:n&Dt?t=e.velocityX:n&Pt&&(t=e.velocityY),this._super.attrTest.call(this,e)&&n&e.direction&&e.distance>this.options.threshold&&ht(t)>this.options.velocity&&e.eventType&Ct},emit:function(e){var t=K(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(rt,$,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[en]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,s=e.deltaTime<t.time;if(this.reset(),e.eventType&Tt&&0===this.count)return this.failTimeout();if(r&&s&&n){if(e.eventType!=Ct)return this.failTimeout();var o=this.pTime?e.timeStamp-this.pTime<t.interval:!0,u=!this.pCenter||P(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,u&&o?this.count+=1:this.count=1,this._input=e;var a=this.count%t.taps;if(0===a)return this.hasRequireFailures()?(this._timer=i(function(){this.state=fn,this.tryEmit()},t.interval,this),on):fn}return cn},failTimeout:function(){return this._timer=i(function(){this.state=cn},this.options.interval,this),cn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==fn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),it.VERSION="2.0.4",it.defaults={domEvents:!1,touchAction:Yt,enable:!0,inputTarget:null,inputClass:null,preset:[[tt,{enable:!1}],[Z,{enable:!1},["rotate"]],[nt,{direction:Dt}],[Y,{direction:Dt},["swipe"]],[rt],[rt,{event:"doubletap",taps:2},["tap"]],[et]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var hn=1,pn=2;st.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?pn:hn},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&fn)&&(i=t.curRecognizer=null);for(var s=0;s<r.length;)n=r[s],t.stopped===pn||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(on|un|an)&&(i=t.curRecognizer=n),s++}},get:function(e){if(e instanceof $)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(s(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(s(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(y(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return o(g(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return o(g(e),function(e){t?n[e].splice(y(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&ut(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(it,{INPUT_START:Tt,INPUT_MOVE:Nt,INPUT_END:Ct,INPUT_CANCEL:kt,STATE_POSSIBLE:sn,STATE_BEGAN:on,STATE_CHANGED:un,STATE_ENDED:an,STATE_RECOGNIZED:fn,STATE_CANCELLED:ln,STATE_FAILED:cn,DIRECTION_NONE:Lt,DIRECTION_LEFT:At,DIRECTION_RIGHT:Ot,DIRECTION_UP:Mt,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:Dt,DIRECTION_VERTICAL:Pt,DIRECTION_ALL:Ht,Manager:st,Input:T,TouchAction:X,TouchInput:U,MouseInput:F,PointerEventInput:I,TouchMouseInput:W,SingleTouchInput:q,Recognizer:$,AttrRecognizer:G,Tap:rt,Pan:Y,Swipe:nt,Pinch:Z,Rotate:tt,Press:et,on:p,off:d,each:o,merge:a,extend:u,inherit:f,bindFn:l,prefixed:E}),typeof define==lt&&define.amd?define("hammer",[],function(){return it}):"undefined"!=typeof module&&module.exports?module.exports=it:e[n]=it}(window,document,"Hammer"),function(e){e.Callbacks=function(t){t=e.extend({},t);var n,r,i,s,o,u,a=[],f=!t.once&&[],l=function(e){n=t.memory&&e,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;++u)if(a[u].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a.length=0:c.disable())},c={add:function(){if(a){var r=a.length,u=function(n){e.each(n,function(e,n){typeof n=="function"?(!t.unique||!c.has(n))&&a.push(n):n&&n.length&&typeof n!="string"&&u(n)})};u(arguments),i?o=a.length:n&&(s=r,l(n))}return this},remove:function(){return a&&e.each(arguments,function(t,n){var r;while((r=e.inArray(n,a,r))>-1)a.splice(r,1),i&&(r<=o&&--o,r<=u&&--u)}),this},has:function(t){return!!a&&!!(t?e.inArray(t,a)>-1:a.length)},empty:function(){return o=a.length=0,this},disable:function(){return a=f=n=undefined,this},disabled:function(){return!a},lock:function(){return f=undefined,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return a&&(!r||f)&&(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments)},fired:function(){return!!r}};return c}}(Zepto),define("zepto-callback",["zepto"],function(){}),function(e){function n(t){var r=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],i="pending",s={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n(function(n){e.each(r,function(r,i){var u=e.isFunction(t[r])&&t[r];o[i[1]](function(){var t=u&&u.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var r=this===s?n.promise():this,o=u?[t]:arguments;n[i[0]+"With"](r,o)}})}),t=null}).promise()},promise:function(t){return t!=null?e.extend(t,s):s}},o={};return e.each(r,function(e,t){var n=t[2],u=t[3];s[t[1]]=n.add,u&&n.add(function(){i=u},r[e^1][2].disable,r[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?s:this,arguments),this},o[t[0]+"With"]=n.fireWith}),s.promise(o),t&&t.call(o,o),o}var t=Array.prototype.slice;e.when=function(r){var i=t.call(arguments),s=i.length,o=0,u=s!==1||r&&e.isFunction(r.promise)?s:0,a=u===1?r:n(),f,l,c,h=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?t.call(arguments):i,r===f?a.notifyWith(n,r):--u||a.resolveWith(n,r)}};if(s>1){f=new Array(s),l=new Array(s),c=new Array(s);for(;o<s;++o)i[o]&&e.isFunction(i[o].promise)?i[o].promise().done(h(o,c,i)).fail(a.reject).progress(h(o,l,f)):--u}return u||a.resolveWith(c,i),a.promise()},e.Deferred=n}(Zepto),define("zepto-deferred",["zepto","zepto-callback"],function(){}),define("nyx_page_animation",["zepto","zepto-deferred"],function(e){var t={slide:[["slideOutUp","slideInUp"],["slideOutDown","slideInDown"]],slideHorizontally:[["slideOutLeft","slideInRight"],["slideOutRight","slideInLeft"]],flip:[["nyxFlipOutUp","nyxFlipInUp"],["nyxFlipOutDown","nyxFlipInDown"]],shrinkAndSlide:[["shrinkOutUp","slideInUp"],["shrinkOutDown","slideInDown"]],fade:[["fadeOut","fadeIn"],["fadeOut","fadeIn"]]};return{getExecutor:function(n){var r=t[n];if(r)return function(t,n,i){return new e.Deferred(function(e){n.css("zIndex",20),i>0?(t.addClass(r[0][0]),n.show().addClass(r[0][1]).one("webkitAnimationEnd",function(i){i.stopPropagation(),n.removeClass(r[0][1]).css("zIndex",10),t.hide().removeClass(r[0][0]),e.resolve()})):(t.addClass(r[1][0]),n.show().addClass(r[1][1]).one("webkitAnimationEnd",function(i){i.stopPropagation(),n.removeClass(r[1][1]).css("zIndex",10),t.hide().removeClass(r[1][0]),e.resolve()}))})};throw new Error("Not found executor: "+n)}}}),define("nyx_widget_animation",["zepto","zepto-deferred"],function(e){return{getExecutor:function(t){return function(n,r,i){return i=i||0,new e.Deferred(function(e){setTimeout(function(){r=="enter"&&n.show(),n.addClass(t).one("webkitAnimationEnd",function(){r=="leave"&&n.hide(),n.removeClass(t),e.resolve()})},i)})}}}}),define("widgets/slide_show",["zepto","../nyx_page_animation","hammer"],function(e,t,n){function r(r,i){var s=this;s.$root=e(r),s.current=0,s.freeze=!1,s.screenWidth=e(window).width(),s.$ul=s.$root.children("ul"),s.$slides=s.$ul.children().each(function(t){var n=e(this);t!=0&&n.hide()}),s.length=s.$slides.size(),s.executor=t.getExecutor(i.animation||"slideHorizontally");var o=new n(s.$root[0]);o.on("panleft",function(){s.next()}).on("panright",function(){s.prev()})}return r.prototype={moveTo:function(e,t){var n=this;if(n.freeze)return;n.freeze=!0,t=t||e-n.current;var r=n.executor.call(n,n.$slides.eq(n.current),n.$slides.eq(e),t);n.current=e,r.then(function(){n.freeze=!1})},next:function(){this.current==this.length-1?this.moveTo(0,1):this.moveTo(this.current+1)},prev:function(){this.current==0?this.moveTo(this.length-1,-1):this.moveTo(this.current-1)}},r}),define("widgets/scrawl",["zepto"],function(e){"use strict";function t(t,n){this.$root=e(t),this.config=n,this.initCanvas(n)}return t.prototype={initCanvas:function(t){var n=this;this.$canvas=this.$root.children("canvas"),this.canvas=this.$canvas[0],this.canvas.width=t.width,this.canvas.height=t.height,this.ctx=this.canvas.getContext("2d"),(new e.Deferred(function(e){if(t.color)n.ctx.fillStyle=t.color,n.ctx.fillRect(0,0,t.width,t.height),e.resolve();else if(t.image){var r=new Image;r.src=t.image,r.onload=function(){n.ctx.drawImage(r,0,0,t.width,t.height),e.resolve()}}})).then(function(){n.ctx.lineJoin="round",n.ctx.lineCap="round",n.ctx.lineWidth=40,n.ctx.globalCompositeOperation="destination-out"}),this.$canvas.on("touchstart",function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0];n.lastX=t.pageX,n.lastY=t.pageY}).on("touchmove",function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0];n.drawLine(n.lastX,n.lastY,t.pageX,t.pageY),n.lastX=t.pageX,n.lastY=t.pageY}).on("touchend",function(e){e.preventDefault(),e.stopPropagation(),n.isOver()&&n.$canvas.addClass("fadeOut").one("animationend webkitAnimationEnd",function(){n.overCallback&&n.overCallback.call(this)})})},drawLine:function(e,t,n,r){this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(n,r),this.ctx.stroke()},isOver:function(){var e=this.ctx.getImageData(0,0,this.config.width,this.config.height),t=e.data,n=e.width*e.height,r=0;for(var i=0;i<n;i++){var s=i*4,o=t[s]+t[s+1]+t[s+2]+t[s+3];o===0&&r++}var u=r/n;return u>=this.config.finishThreshold},onOver:function(e){this.overCallback=e}},t}),define("nyx",["require","zepto","hammer","nyx_page_animation","nyx_widget_animation","widgets/slide_show","widgets/scrawl"],function(e){"use strict";function u(e){var n=this;this.config=e,this.currentPage=0,this.startPage=0,this.totalPages=e.pages.length,this.widgets=[],this.hasWelcomePage=!1,this.freeze=!1,this.$bottomButton=t("#nyx-bottom-button").bind("touch",function(){n.nextPage()}),this.loadedPromise=this._loadImages().then(function(){return new t.Deferred(function(e){window.setTimeout(function(){e.resolve()},1500)})}),this.initPages(),this.initMusic(),this.initCount();var r=location.hash;if(r.length>1){var i=location.hash.substring(1)-0;if(!isNaN(i)){this.moveTo(i,1,!0);return}var s=t(r);if(s.size()>0){this.moveTo(s.index(),1,!0);return}}n.hasWelcomePage?n.loadedPromise.then(function(){n.moveTo(n.startPage,1),n.$bottomButton.show()}):n.executeWidgetAnimation()}var t=e("zepto"),n=e("hammer"),r=e("nyx_page_animation"),i=e("nyx_widget_animation"),s=e("widgets/slide_show"),o=e("widgets/scrawl");return u.prototype={initPages:function(){document.addEventListener("touchmove",function(e){e.preventDefault()},!1);var e=this,r=t(window),i=r.height(),u=r.width(),a=t(".nyx-wrapper");a.height(i);var f=document.querySelector(".nyx-wrapper"),l=new n(f);l.on("panup",function(){e.nextPage()}).on("pandown",function(){e.prevPage()});var c=this.config.pages;this.$pages=t(".nyx-page").each(function(n){var r=t(this);e.currentPage!=n&&r.hide(),r.addClass("nyx-animated-page"),e.widgets[n]=r.children(".animated");var a=c[n];a.type==="welcome"&&(e.hasWelcomePage=!0,e.startPage=1);var f=a.widgets;for(var l,h=0;l=f[h];h++){l.linkTo&&function(e){t("#"+l.id).click(function(){window.open(e)})}(l.linkTo),l.moveTo&&function(n){t("#"+l.id).click(function(){console.log("234324"),e.moveTo(t("#"+n).index())})}(l.moveTo);if(l.type==="slideShow")new s("#"+l.id,l);else if(l.type==="scrawl"){l.width=u,l.height=i;var p=new o("#"+l.id,l);a.type==="welcome"?e.loadedPromise=e.loadedPromise.then(function(){return new t.Deferred(function(e){p.onOver(function(){e.resolve()})})}):p.onOver(function(){e.nextPage()})}}})},initMusic:function(){var e=this;this.config.audio&&(this.isAudioOn=!1,this.audioElement=document.getElementById("nyx-audio"),this.$audioButton=t("#nyx-audio-toggle-button").click(function(){e.toggleAudio()}),this.hasWelcomePage?this.loadedPromise.then(function(){e.$audioButton.show(),e.config.audio.autoplay&&e.toggleAudio()}):(e.$audioButton.show(),e.config.audio.autoplay&&e.toggleAudio()))},toggleAudio:function(){this.isAudioOn?(this.audioElement.pause(),this.$audioButton.removeClass("rotating")):(this.audioElement.play(),this.$audioButton.addClass("rotating")),this.isAudioOn=!this.isAudioOn},initCount:function(){var e=this;t.get("/count/"+this.config.id,function(t){e.setCount(t.count)})},setCount:function(e){t(".nyx-text").each(function(){var n=t(this),r=n.text();n.text(r.replace("{count}",e))})},nextPage:function(){this.currentPage!=this.totalPages-1&&this.moveTo(this.currentPage+1)},prevPage:function(){this.currentPage!=this.startPage&&this.moveTo(this.currentPage-1)},moveTo:function(e,n,r){var i=this;if(i.freeze)return;i.freeze=!0;var s=i.currentPage;i.switchPage(e,n).then(function(){i.widgets[s].hide(),i.freeze=!1;var e=i.executeWidgetAnimation();return t.when.apply(t,e)}).then(function(){}),e===i.totalPages-1?i.$bottomButton.hide():i.$bottomButton.show()},switchPage:function(e,t){var n=this;t=t||e-n.currentPage;var i=n.config.pages[n.currentPage].leave||n.config.pages[e].enter,s=r.getExecutor(i),o=s.call(n,n.$pages.eq(n.currentPage),n.$pages.eq(e),t);return n.currentPage=e,o},executeWidgetAnimation:function(){var e=this,n=this.config.pages[this.currentPage].widgets||[],r=[];return n.forEach(function(n){var i=t("#"+n.id),s=n.enter,o=n.leave;s&&r.push(e._executeWidgetAnimation(i,s,n.enterTimeout,"enter")),o&&r.push(e._executeWidgetAnimation(i,o,n.leaveTimeout,"leave"))}),r},_executeWidgetAnimation:function(e,t,n,r){var s=i.getExecutor(t);return s.call(this,e,r,n)},_loadImages:function(){var e=this.config.images,n=[];for(var r=0;r<e.length;r++){var i=e[r];n.push(this._loadImage(i))}return t.when.apply(t,n)},_loadImage:function(e){return new t.Deferred(function(t){var n=new Image;n.src=e,n.onload=function(){t.resolve()}})}},u}),requirejs.config({paths:{zepto:"../bower_components/zepto/zepto","zepto-touch":"../bower_components/zeptojs/src/touch","zepto-callback":"../bower_components/zeptojs/src/callbacks","zepto-deferred":"../bower_components/zeptojs/src/deferred",hammer:"../bower_components/hammerjs/hammer.min"},shim:{zepto:{exports:"$"},"zepto-touch":{deps:["zepto"]},"zepto-callback":{deps:["zepto"]},"zepto-deferred":{deps:["zepto","zepto-callback"]}}}),require(["nyx","NyxConfig"],function(e,t){window.nyx=new e(t)}),define("config",function(){});